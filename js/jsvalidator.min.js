// Babel: https://babeljs.io/repl
// Min: https://skalman.github.io/UglifyJS-online/
"use strict";function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class JSValidator{constructor(t){_defineProperty(this,"status",!0),_defineProperty(this,"errors",[]),_defineProperty(this,"via","http"),_defineProperty(this,"validators",{minLength:3,maxLangth:255}),_defineProperty(this,"msg",{required:"Este campo es requerido.",minLength:"Longitud no válida. Minimo __minLength__ caracteres.",maxLength:"Longitud no válida. Máximo __maxLength__ caracteres.",email:"El campo de email no es válido",integer:"Por favor coloca un número entero",alphanumeric:"Solo se permiten letras y números sin espacios",url:"Escribe una URL válida. Indica el protocolo http:// o https://"}),this.setForm(t),this.setInputs(),this.parseInputs()}setForm(t){this.form=document.getElementById(t)}setInputs(){this.inputs=document.querySelectorAll(`#${this.form.id} .jsValidator`)}setAjax(){return this.via="ajax",this}setHttp(){return this.via="http",this}parseInputs(){this.inputs.forEach(t=>{this.appendErrorsTag(t)})}appendErrorsTag(t){let e=t.parentNode,r=document.createElement("span");r.setAttribute("class","error-msg"),e.appendChild(r)}validateForm(){this.form.addEventListener("submit",t=>{this.resetValidation(),this.inputs.forEach(t=>{this.validateInput(t)}),this.status?"ajax"==this.via?(t.preventDefault(),this.submitHandler()):(t.preventDefault(),console.log("Se ha enviado con el navegador")):t.preventDefault()})}validateInputs(){this.inputs.forEach(t=>{t.addEventListener("input",e=>{this.resetValidation(),this.validateInput(t)})})}validateInput(t){let e=t.dataset.validators;void 0!==e&&(e=e.split(" ")).forEach(e=>{this[`_${e}`](t)})}setError(t,e){this.status=!1,this.setStackError(t,e),this.setErrorMessage(t,e)}setStackError(t,e){this.errors.push({input:t,msg:e})}setErrorMessage(t,e){t.nextElementSibling.innerHTML+=e+"<br />"}resetValidation(){this.status=!0,this.resetStackError(),this.resetErrorMessages()}resetStackError(){this.errors=[]}resetErrorMessages(){document.querySelectorAll(`#${this.form.id} .error-msg`).forEach(t=>{t.innerHTML=""})}submitHandler(){let t=new FormData(this.form);fetch(this.form.action,{method:this.form.method,body:t}).then(t=>t.json()).then(t=>{console.log(t)}).catch(t=>{console.log(t)})}init(){return this.validateForm(),this.validateInputs(),this}}JSValidator.prototype._required=function(t){let e=t.value,r=this.msg.required;(""===e.trim()||e.length<1)&&this.setError(t,r)},JSValidator.prototype._length=function(t){let e,r=t.value.length,s=void 0!==t.dataset.validators_minlength?Number(t.dataset.validators_minlength):this.validators.minLength,a=void 0!==t.dataset.validators_maxlength?Number(t.dataset.validators_maxlength):this.validators.maxLength;r<s&&(e=this.msg.minLength.replace("__minLength__",s),this.setError(t,e)),r>a&&(e=this.msg.maxLength.replace("__maxLength__",a),this.setError(t,e))},JSValidator.prototype._email=function(t){let e=t.value,r=this.msg.email;new RegExp(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i).test(e)||""==e.trim()||this.setError(t,r)},JSValidator.prototype._integer=function(t){let e=t.value,r=this.msg.integer;new RegExp(/^[0-9]+$/).test(e)||""===e.trim()||this.setError(t,r)},JSValidator.prototype._alphanumeric=function(t){let e=t.value,r=this.msg.alphanumeric;new RegExp(/^[a-zA-Z0-9]+$/).test(e)||""===e.trim()||this.setError(t,r)},JSValidator.prototype._url=function(t){let e=t.value,r=this.msg.url;new RegExp(/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i).test(e)||""==e.trim()||this.setError(t,r)};